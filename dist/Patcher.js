import{extract as e,getEntries as r,getStrings as t}from"./Extract.js";import{Rebuilder as i}from"./Rebuilder.js";export class Patcher{constructor(d){let l=new Map(e(d)),u=r(l.get("INF1")),o=new Map(t(u,l.get("DAT1")));for(let[,e,r]of(this.rebuilder=new i(u[0]?.[2].length??0),u)){if(0===e){this.rebuilder.addNull();continue}this.rebuilder.addString(e,o.get(e)?.[0],r)}for(let[e,r]of l)"INF1"!==e&&"DAT1"!==e&&this.rebuilder.addSection(e,r)}patchString(e,r){this.rebuilder.updateString(e,r)}build(){return this.rebuilder.build()}}