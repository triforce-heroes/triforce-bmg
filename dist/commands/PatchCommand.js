import{existsSync as o,readFileSync as t,writeFileSync as r}from"node:fs";import{normalize as e}from"node:path";import{fatal as i}from"@triforce-heroes/triforce-core";import{Patcher as n}from"../Patcher.js";export function PatchCommand(f,c,p){o(f)||i(`Source file not found: ${f}`),o(c)||i(`Transpiled JSON file not found: ${c}`);let s=e(p??`${f}.patched`);process.stdout.write(`Patching ${f} using ${e(c)} to ${s}... `);let d=new n(t(f));for(let[o,r]of JSON.parse(t(c).toString()))d.patchString(o,r);r(s,d.build()),process.stdout.write("OK\n")}